(function(d){"use strict";var y=Object.defineProperty,p=Object.defineProperties,w=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,f=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,o=(t,e)=>{for(var r in e||(e={}))_.call(e,r)&&f(t,r,e[r]);if(g)for(var r of g(e))$.call(e,r)&&f(t,r,e[r]);return t},b=(t,e)=>p(t,w(e));const l=()=>({backgroundColor:"transparent",timing:{duration:2*1e3,iterations:1/0},glitchTimeSpan:{start:.5,end:.7},shake:{velocity:15,amplitudeX:.4,amplitudeY:.4},slice:{count:6,velocity:15,minHeight:.02,maxHeight:.15,hueRotate:!0}}),c=(t,e)=>{let r=0;if(t.glitchTimeSpan){const n=t.glitchTimeSpan.start,s=t.glitchTimeSpan.end;if(e<n||e>s)return 0;const i=n+(s-n)/2;e<i?r=(e-n)/(i-n):r=(s-e)/(s-i)}else r=1;return(Math.random()-.5)*2*r},v=({minHeight:t,maxHeight:e,minWidth:r,maxWidth:a})=>{const n=Math.floor(Math.random()*((e-t)*100+1))+t*100,s=Math.floor(Math.random()*((a-r)*100+1))+r*100,i=Math.floor(Math.random()*(100-n)),u=Math.floor(Math.random()*(100-s));return{top:i,left:u,height:n,width:s}},P=({top:t,left:e,height:r,width:a})=>{const n=`${e+a}% ${t}%`,s=`${e+a}% ${t+r}%`,i=`${e}% ${t+r}%`,u=`${e}% ${t}%`;return`polygon(${n}, ${s}, ${i}, ${u})`},h=t=>b(o({},l().timing),{easing:`steps(${t}, jump-start)`}),M=t=>{if(!t.slice)throw new Error("Slice are not enabled");const e=Math.floor(t.slice.velocity*t.timing.duration/1e3)+1,r=[];for(let a=0;a<e;++a){const n=v({minHeight:t.slice.minHeight,maxHeight:t.slice.maxHeight,minWidth:1,maxWidth:1}),s=c(t,a/e)*30,i={};i.transform=`translate3d(${s}%, 0, 0)`,i.clipPath=P(n),t.slice.hueRotate&&(i.filter=`hue-rotate(${Math.floor(c(t,a/e)*360)}deg)`),r.push(i)}return{steps:r,timing:o(o({},h(e)),t.timing)}},C=t=>{if(!t.shake)return{steps:[],timing:h(1)};const e=Math.floor(t.shake.velocity*t.timing.duration/1e3)+1,r=[];for(let a=0;a<e;++a){const n=c(t,a/e)*t.shake.amplitudeX*100,s=c(t,a/e)*t.shake.amplitudeY*100,i={};i.transform=`translate3d(${n}%, ${s}%, 0)`,r.push(i)}return{steps:r,timing:o(o({},h(e)),t.timing)}},R=t=>{const e=[];if(e.push(C(t)),t.slice)for(let r=0;r<t.slice.count;++r)e.push(M(t));return e};function m(...t){const e=r=>r&&typeof r=="object";return t.reduce((r,a)=>(Object.keys(a).forEach(n=>{const s=r[n],i=a[n];if(Array.isArray(s)&&Array.isArray(i)){r[n]=s.concat(...i);return}if(e(s)&&e(i)){r[n]=m(s,i);return}i!==void 0&&(r[n]=i)}),r),{})}const k={glitch:(t,e)=>{if(e=m(l(),e),typeof t=="string"){const a=document.querySelector(t);if(!a)throw new Error(`Could not find element with selector ${t}`);t=a}for(t.style.position="relative",t.style.overflow="hidden";t.firstChild;)t.removeChild(t.firstChild);const r=R(e);for(const a of r){const n=document.createElement("div");n.classList.add("layer"),n.style.backgroundColor=e.backgroundColor,n.style.backgroundImage=`url(${e.imageUrl})`,n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.width="100%",n.style.height="100%",n.style.top="0",n.style.left="0",n.style.position="absolute",n.animate(a.steps,a.timing),t.appendChild(n)}},getDefaultOptions:l};d.PowerGlitch=k,Object.defineProperty(d,"__esModule",{value:!0})})(this.window=this.window||{});
