(function(d){"use strict";var y=Object.defineProperty,p=Object.defineProperties,w=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,f=(t,e,r)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l=(t,e)=>{for(var r in e||(e={}))_.call(e,r)&&f(t,r,e[r]);if(g)for(var r of g(e))$.call(e,r)&&f(t,r,e[r]);return t},b=(t,e)=>p(t,w(e));const h=()=>({backgroundColor:"transparent",timing:{duration:2*1e3,iterations:1/0},glitchTimeSpan:{start:.5,end:.7},shake:{velocity:15,amplitudeX:.4,amplitudeY:.4},slice:{count:6,velocity:15,minHeight:.02,maxHeight:.15,hueRotate:!0}}),c=(t,e)=>{let r=0;if(t.glitchTimeSpan){const s=t.glitchTimeSpan.start,a=t.glitchTimeSpan.end;if(e<s||e>a)return 0;const o=s+(a-s)/2;e<o?r=(e-s)/(o-s):r=(a-e)/(a-o)}else r=1;return(Math.random()-.5)*2*r},v=({minHeight:t,maxHeight:e,minWidth:r,maxWidth:n})=>{const s=Math.floor(Math.random()*((e-t)*100+1))+t*100,a=Math.floor(Math.random()*((n-r)*100+1))+r*100,o=Math.floor(Math.random()*(100-s)),i=Math.floor(Math.random()*(100-a));return{top:o,left:i,height:s,width:a}},P=({top:t,left:e,height:r,width:n})=>{const s=`${e+n}% ${t}%`,a=`${e+n}% ${t+r}%`,o=`${e}% ${t+r}%`,i=`${e}% ${t}%`;return`polygon(${s}, ${a}, ${o}, ${i})`},u=t=>b(l({},h().timing),{easing:`steps(${t}, jump-start)`}),M=t=>{if(!t.slice)throw new Error("Slice are not enabled");const e=Math.floor(t.slice.velocity*t.timing.duration/1e3)+1,r=[];for(let n=0;n<e;++n){const s=v({minHeight:t.slice.minHeight,maxHeight:t.slice.maxHeight,minWidth:1,maxWidth:1}),a=c(t,n/e)*30,o={};o.transform=`translate3d(${a}%, 0, 0)`,o.clipPath=P(s),t.slice.hueRotate&&(o.filter=`hue-rotate(${Math.floor(c(t,n/e)*360)}deg)`),r.push(o)}return{steps:r,timing:l(l({},u(e)),t.timing)}},O=t=>{if(!t.shake)return{steps:[],timing:u(1)};const e=Math.floor(t.shake.velocity*t.timing.duration/1e3)+1,r=[];for(let n=0;n<e;++n){const s=c(t,n/e)*t.shake.amplitudeX*100,a=c(t,n/e)*t.shake.amplitudeY*100,o={};o.transform=`translate3d(${s}%, ${a}%, 0)`,r.push(o)}return{steps:r,timing:l(l({},u(e)),t.timing)}},C=t=>{const e=[];if(e.push(O(t)),t.slice)for(let r=0;r<t.slice.count;++r)e.push(M(t));return e};function m(...t){const e=r=>r&&typeof r=="object";return t.reduce((r,n)=>(Object.keys(n).forEach(s=>{const a=r[s],o=n[s];if(Array.isArray(a)&&Array.isArray(o)){r[s]=a.concat(...o);return}if(e(a)&&e(o)){r[s]=m(a,o);return}o!==void 0&&(r[s]=o)}),r),{})}const R={glitch:(t,e)=>{e=m(h(),e);let r=[];if(typeof t=="string"){const a=document.querySelectorAll(t);if(!a.length)throw new Error(`Could not find any element with selector ${t}`);r=Array.from(a)}else r=[t];for(const a of r)for(a.style.position="relative",a.style.overflow="hidden";a.firstChild;)a.removeChild(a.firstChild);const n=document.createElement("div");n.classList.add("layer"),n.style.backgroundColor=e.backgroundColor,n.style.backgroundImage=`url(${e.imageUrl})`,n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.width="100%",n.style.height="100%",n.style.top="0",n.style.left="0",n.style.position="absolute";const s=C(e);for(const a of r)for(const o of s){const i=n.cloneNode(!1);i.animate(o.steps,o.timing),a.appendChild(i)}},getDefaultOptions:h};d.PowerGlitch=R,Object.defineProperty(d,"__esModule",{value:!0})})(this.window=this.window||{});
