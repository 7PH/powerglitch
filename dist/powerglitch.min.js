(function(g){"use strict";var v=Object.defineProperty,b=Object.defineProperties,_=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,E=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable,u=(e,r,t)=>r in e?v(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,l=(e,r)=>{for(var t in r||(r={}))E.call(r,t)&&u(e,t,r[t]);if(d)for(var t of d(r))$.call(r,t)&&u(e,t,r[t]);return e},O=(e,r)=>b(e,_(r));const m=()=>({backgroundColor:"transparent",hideOverflow:!1,timing:{duration:2*1e3,iterations:1/0},glitchTimeSpan:{start:.5,end:.7},shake:{velocity:15,amplitudeX:.4,amplitudeY:.4},slice:{count:6,velocity:15,minHeight:.02,maxHeight:.15,hueRotate:!0}}),c=(e,r)=>{let t=0;if(e.glitchTimeSpan){const n=e.glitchTimeSpan.start,i=e.glitchTimeSpan.end;if(r<n||r>i)return 0;const a=n+(i-n)/2;r<a?t=(r-n)/(a-n):t=(i-r)/(i-a)}else t=1;return(Math.random()-.5)*2*t},M=({minHeight:e,maxHeight:r,minWidth:t,maxWidth:o})=>{const n=Math.floor(Math.random()*((r-e)*100+1))+e*100,i=Math.floor(Math.random()*((o-t)*100+1))+t*100,a=Math.floor(Math.random()*(100-n)),s=Math.floor(Math.random()*(100-i));return{top:a,left:s,height:n,width:i}},P=({top:e,left:r,height:t,width:o})=>{const n=`${r+o}% ${e}%`,i=`${r+o}% ${e+t}%`,a=`${r}% ${e+t}%`,s=`${r}% ${e}%`;return`polygon(${n}, ${i}, ${a}, ${s})`},f=e=>O(l({},m().timing),{easing:`steps(${e}, jump-start)`}),C=e=>{if(!e.slice)throw new Error("Slice are not enabled");const r=Math.floor(e.slice.velocity*e.timing.duration/1e3)+1,t=[];for(let o=0;o<r;++o){const n=M({minHeight:e.slice.minHeight,maxHeight:e.slice.maxHeight,minWidth:1,maxWidth:1}),i=c(e,o/r)*30,a={};a.transform=`translate3d(${i}%, 0, 0)`,a.clipPath=P(n),e.slice.hueRotate&&(a.filter=`hue-rotate(${Math.floor(c(e,o/r)*360)}deg)`),t.push(a)}return{steps:t,timing:l(l({},f(r)),e.timing)}},L=e=>{if(!e.shake)return{steps:[],timing:f(1)};const r=Math.floor(e.shake.velocity*e.timing.duration/1e3)+1,t=[];for(let o=0;o<r;++o){const n=c(e,o/r)*e.shake.amplitudeX*100,i=c(e,o/r)*e.shake.amplitudeY*100,a={};a.transform=`translate3d(${n}%, ${i}%, 0)`,t.push(a)}return{steps:t,timing:l(l({},f(r)),e.timing)}},y=e=>{const r=[];if(r.push(L(e)),e.slice)for(let t=0;t<e.slice.count;++t)r.push(C(e));return r},p=(e,r,t,o)=>{const n=document.createElement("div");for(n.classList.add("layer"),n.style.backgroundColor=t.backgroundColor,n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.backgroundSize="contain",n.style.width="100%",n.style.height="100%",n.style.top="0",n.style.left="0",n.style.position="absolute",e.style.position="relative",t.hideOverflow?e.style.overflow="hidden":e.style.overflow="visible";e.firstChild;)e.removeChild(e.firstChild);for(const i of r){const a=n.cloneNode(!1);a.style.backgroundImage=`url(${o})`,a.animate(i.steps,i.timing),e.appendChild(a)}};function w(...e){const r=t=>t&&typeof t=="object";return e.reduce((t,o)=>(Object.keys(o).forEach(n=>{const i=t[n],a=o[n];if(Array.isArray(i)&&Array.isArray(a)){t[n]=i.concat(...a);return}if(r(i)&&r(a)){t[n]=w(i,a);return}a!==void 0&&(t[n]=a)}),t),{})}const R={glitch:(e=".powerglitch",r={})=>{const t=w(m(),r);let o=[];if(typeof e=="string"){const s=document.querySelectorAll(e);if(!s.length)throw new Error(`Could not find any element with selector ${e}`);o=Array.from(s)}else o=[e];const n=o.filter(s=>s instanceof HTMLImageElement),i=o.filter(s=>s instanceof HTMLDivElement),a=y(t);for(const s of n){const h=document.createElement("div");if(h.style.width=s.clientWidth+"px",h.style.height=s.clientHeight+"px",!s.parentElement)throw new Error("Unable to glitch image, it is not attached to a parent element");s.parentElement.insertBefore(h,s),s.remove(),p(h,a,t,t.imageUrl||s.src)}for(const s of i){if(!t.imageUrl)throw new Error("Options.imageUrl must be set if there are div elements to glitch");p(s,a,t,t.imageUrl)}},generateLayers:y,getDefaultOptions:m};g.PowerGlitch=R,Object.defineProperty(g,"__esModule",{value:!0})})(this.window=this.window||{});
